<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Code Review Agent</title>
<script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-slate-900 text-white min-h-screen">

<header class="p-4 bg-slate-800 text-center text-xl font-bold">
    Intelligent Code Review & Rewrite
</header>

<main class="grid grid-cols-1 md:grid-cols-2 gap-6 p-6">

<div>
    <h2 class="mb-2 font-semibold">Your Code</h2>
    <textarea id="code"
        class="w-full h-72 bg-slate-800 p-3 rounded"
        placeholder="Paste your code here..."></textarea>

    <button onclick="review()"
        class="mt-4 bg-purple-600 hover:bg-purple-700 px-6 py-2 rounded">
        Review Code
    </button>
</div>

<div>
    <h2 class="mb-2 font-semibold">Review Results</h2>
    <pre id="result"
        class="bg-slate-800 p-4 rounded h-72 overflow-auto text-sm">
Waiting for review...
    </pre>
</div>

</main>

<script>
async function review() {
    const code = document.getElementById("code").value;
    const resBox = document.getElementById("result");

    resBox.textContent = "Analyzing...";

    const res = await fetch("/api/review", {
        method: "POST",
        headers: {"Content-Type": "application/json"},
        body: JSON.stringify({ code })
    });

    const data = await res.json();
    resBox.textContent = data.result;
}
</script>

</body>
</html>